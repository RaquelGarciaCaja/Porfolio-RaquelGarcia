"use strict";const input=document.querySelector(".js-input"),btn=document.querySelector(".js-button"),listMovies=document.querySelector(".js-main__list"),url="//api.tvmaze.com/search/shows?q=",imgPlaceholder="https://via.placeholder.com/210x295/ffffff/666666/?text=TV",resetAllFavorites=document.querySelector(".js-reset");let movies=[],arrFavoriteList=[];function getData(){fetch(url+input.value).then(e=>e.json()).then(e=>{movies=e,paintMovies(),listenFavMovies(),paintFavorite(),listenTrashItem()})}function paintMovies(){let e="";for(let t=0;t<movies.length;t++){let i;i=-1!==arrFavoriteList.findIndex(e=>e.show.id===movies[t].show.id)?"color-favorite":"";const a=movies[t].show.image;e+=`<li class = "main__container  ${i}" id="${movies[t].show.id}">`,e+=null!==a?`<img class = "main__img" src="${movies[t].show.image.medium}" alt="${movies[t].show.name}" />`:`<img class = "main__img" src="${imgPlaceholder}" alt="${movies[t].show.name}" />`,e+=`<h3 class = "main__name">${movies[t].show.name}</h3>`,e+="</li>"}listMovies.innerHTML=e,listenFavMovies()}function handleFilter(){getData()}function favMovies(e){const t=e.currentTarget,i=parseInt(t.id),a=arrFavoriteList.findIndex(e=>{if(parseInt(e.show.id)===i)return e});if(-1===a){const e=movies.find(e=>{if(parseInt(e.show.id)===i)return e});arrFavoriteList.push(e),t.classList.add("color-favorite")}else arrFavoriteList.splice(a,1);paintMovies(),listenFavMovies(),paintFavorite(),listenTrashItem(),setLocalStorage()}function paintFavorite(){const e=document.querySelector(".js-main__aside--fav");let t="";for(let e=0;e<arrFavoriteList.length;e++)t+=`<li class = "main__container--fav" id="${arrFavoriteList[e].show.id}">`,null!==arrFavoriteList[e].show.image?t+=`<img class = "main__img--fav" src="${arrFavoriteList[e].show.image.medium}" alt="${arrFavoriteList[e].show.name}" />`:t+=`<img class = "main__img--fav" src="${imgPlaceholder}" alt="${arrFavoriteList[e].show.name}" />`,t+=`<h3 class = "main__name--fav">${arrFavoriteList[e].show.name}</h3>`,t+=`<i class="fas fa-trash js-reset-items" id="${e}"></i>`,t+="</li>";e.innerHTML=t,listenFavMovies()}function setLocalStorage(){localStorage.setItem("LocalStorageList",JSON.stringify(arrFavoriteList))}function getLocalStorage(){arrFavoriteList=JSON.parse(localStorage.getItem("LocalStorageList")),null===arrFavoriteList&&(arrFavoriteList=[]),paintMovies(),listenFavMovies(),paintFavorite(),listenTrashItem()}function resetFavorites(){arrFavoriteList.splice(1,arrFavoriteList.length),arrFavoriteList=[],localStorage.clear(),paintFavorite()}function resetItemFavorites(e){const t=e.currentTarget.id;arrFavoriteList.splice(t,1),paintFavorite(),listenFavMovies(),listenTrashItem(),setLocalStorage()}function listenFavMovies(){const e=document.querySelectorAll(".main__container");for(const t of e)t.addEventListener("click",favMovies)}function listenTrashItem(){const e=document.querySelectorAll(".js-reset-items");for(const t of e)t.addEventListener("click",resetItemFavorites)}getLocalStorage(),btn.addEventListener("click",handleFilter),resetAllFavorites.addEventListener("click",resetFavorites);